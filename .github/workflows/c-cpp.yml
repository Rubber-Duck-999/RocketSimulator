name: RocketSimulator CI

on:
  push:
    branches: [ master ]
  pull_request:
    branches: [ master ]

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
    - name: configure dependencies
      run: |
            ls
            chmod 775 configure.sh
            sudo ./configure.sh
    - name: Set Permissions
      run: |
            cd Software/
            chmod -R 777 .
    - name: Linter
      if: steps.filter.outputs.workflows == 'true'
      run: |
            cd Software
            cppcheck *.cc --force
    - name: Build 2D Map
      run: |
            cd Software/2DMap
            mkdir build
            cd build
            cmake ..
            make
            ./exe2DMap-Test
    - name: Build Land Algorithm
      run: |
            cd Software/Land_Algorithm
            mkdir build
            cd build
            cmake ..
            make
            ./exeLand_Algorithm-Test
    - name: Build Flight Algorithm
      run: |
            cd Software/Flight_Algorithm
            mkdir build
            cd build
            cmake ..
            make
            ./exeFlight_Algorithm-Test